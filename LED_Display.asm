ORG	0000H                    ;LED P1 P3, 7 P0 ??
    MOV R5,#10                ;R5 CONTROL SPEED OF LED
START:                       ;A ROUND 8 
	MOV P2,#0FFH	         ;SET TO INPUT
	
LOOP:
							 ;DECREASE LED DELAY TIME AFTER A ROUND
	MOV R4,#0
	MOV B,#2
	MOV R3,#2
BUTTON:
	JNB P2.0,CHOOSE1_P1      ;JUMP TO CHOOSE1
	JNB P2.1,CHOOSE2_P1      ;JUMP TO CHOOSE2
	JNB P2.2,CHOOSE3_P1      ;JUMP TO CHOOSE3
	AJMP BUTTON

CHOOSE1_P1:                  ;OUTPUT QUESTION1
	MOV DPTR,#TABLE1     	 ;FIRST PART
	MOV A,R4
	MOVC A,@A+DPTR
	MOV P1,A
	MOV A,R5
	MOV R2,A
	LCALL DELAY
	MOV P1,#0FFH             ;CLEAR LED
	INC R4
	DJNZ B,CHOOSE1_P1
	MOV B,#2
CHOOSE1_P3:                  ;SECOND PART
	MOV DPTR,#TABLE1
	MOV A,R4
	MOVC A,@A+DPTR
	MOV P3,A
	MOV A,R5
	MOV R2,A
	LCALL DELAY
	MOV P3,#0FFH
	INC R4
	DJNZ B,CHOOSE1_P3
	MOV B,#2
	DJNZ R3,CHOOSE1_P1
	LJMP COUNT
	
CHOOSE2_P1:                  ;OUTPUT QUESTION2
	MOV DPTR,#TABLE2         ;FIRST PART
	MOV A,R4
	MOVC A,@A+DPTR
	MOV P1,A
	MOV A,R5
	MOV R2,A
	LCALL DELAY
	MOV P1,#0FFH
	INC R4
	DJNZ B,CHOOSE2_P1
	MOV B,#2
CHOOSE2_P3:                  ;SECOND PART
	MOV DPTR,#TABLE2
	MOV A,R4
	MOVC A,@A+DPTR
	MOV P3,A
	MOV A,R5
	MOV R2,A
	LCALL DELAY
	MOV P3,#0FFH
	INC R4
	DJNZ B,CHOOSE2_P3
	MOV B,#2
	DJNZ R3,CHOOSE2_P1
	LJMP COUNT
	
CHOOSE3_P1:                  ;OUTPUT QUESTION3
	MOV DPTR,#TABLE3         ;FIRST PART
	MOV A,R4
	MOVC A,@A+DPTR
	MOV P1,A
	MOV A,R5
	MOV R2,A
	LCALL DELAY
	MOV P1,#0FFH
	INC R4
	DJNZ B,CHOOSE3_P1
	MOV B,#2
CHOOSE3_P3:                  ;SECOND PART
	MOV DPTR,#TABLE3
	MOV A,R4
	MOVC A,@A+DPTR
	MOV P3,A
	MOV A,R5
	MOV R2,A
	LCALL DELAY
	MOV P3,#0FFH
	INC R4
	DJNZ B,CHOOSE3_P3
	MOV B,#2
	DJNZ R3,CHOOSE3_P1 
	LJMP COUNT
COUNT:
	MOV R1,#11
	MOV DPTR,#TABLE_7
COUNT88:
	MOV R0,#18
	JNB P2.6,WIN
	JNB P2.7,WIN
COUNT1:
	MOV TMOD,#01H
	MOV TH0,#0               ;SET THE TIMER FROM 0000 TO FFFF
	MOV TL0,#0
	SETB TR0
	JNB TF0,$                ;TOTAL 71.1MS A ROUND
	CLR TR0
	CLR TF0
	DJNZ R0,COUNT1           ;COUNT FOR 1 SECOND
	DJNZ R1,DISPLAY          ;COUNT FROM 9 TO 0
	LJMP LOOP
	
DISPLAY:                     ;SHOW THE LEFT TIME
	JNB P2.0,STOP            ;RECIVE SIGNAL FROM WINNER1
	JNB P2.1,STOP            ;RECIVE SIGNAL FROM WINNER2
	MOV A,#00H
	MOVC A,@A+DPTR
	MOV P0,A
	INC DPTR
	MOV R0,#14
	LJMP COUNT88
	
STOP:                        ;JUMP BACK FOR NEXT QUESTION
	LJMP START
	
WIN:
	LJMP LOOP
DELAY:                       ;MAX DELAY TIME 0.7S,CONTROLED BY R5
DL3: 
    MOV R6,#250
DL1: 
    MOV R7,#200
DL2: 
    DJNZ R7,DL2
	DJNZ R6,DL1
	DJNZ R2,DL3
    RET
	 
TABLE1:                      ;QUESTION1
	DB 10111111B			 ;6
	DB 11110111B			 ;C
	DB 11111101B			 ;2
	DB 01111111B			 ;7
	DB 10111111B			 ;6
	DB 11110111B			 ;C
	DB 11111101B			 ;4
	DB 01111111B			 ;A
		
TABLE2:                      ;QUESTION2
	DB 11111011B			 ;D
	DB 11011111B			 ;3
	DB 11110111B			 ;8
	DB 11011111B			 ;1
	DB 01111111B			 ;9
	DB 11101111B			 ;B
	DB 11111110B			 ;A
	DB 01111111B			 ;7
		
TABLE3:                      ;QUESTION3
	DB 11111101B 			 ;E
	DB 10111111B			 ;6
	DB 10111111B			 ;4
	DB 11111011B			 ;5
	DB 11111110B			 ;F
	DB 01111111B			 ;9
	DB 11101111B			 ;0
	DB 01111111B			 ;7
		
TABLE_7:
	DB 90H                   ;9
	DB 80H                   ;8
	DB 0F8H                  ;7
	DB 82H                   ;6
	DB 92H                   ;5
	DB 99H                   ;4
	DB 0B0H                  ;3
	DB 0A4H                  ;2
	DB 0F9H                  ;1
	DB 0C0H                  ;0

    END
